{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 317380c466346312a590","webpack:///./src/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Classux\"] = factory();\n\telse\n\t\troot[\"Classux\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 317380c466346312a590\n **/","export { Reducer };\n\nconst UPDATER = Symbol();\nconst DISPOSER = Symbol();\n\nconst STATE = Symbol();\nconst LISTENERS = Symbol();\nconst REDUCERS = Symbol();\nconst DEFAULT_STATE = Symbol();\n\nconst NOTIFY = Symbol();\n\nexport default class Store {\n    constructor(defaultState) {\n        this[DEFAULT_STATE] = defaultState;\n        this[STATE] = defaultState;\n        this[LISTENERS] = [];\n        this[REDUCERS] = this[REDUCERS] || {};\n        this[NOTIFY] = (action, ...params) => {\n            for (const listener of this[LISTENERS]) {\n                listener(this[STATE], action, ...params);\n            }\n        }\n    }\n\n    subscribe(listener) {\n        const index = this[LISTENERS].push(listener) - 1;\n        return () => {\n            this[LISTENERS].splice(index, 1);\n        };\n    }\n\n\n    dispatch(action, ...params) {\n        const reducer = this[this[REDUCERS][action]];\n        if (reducer) {\n            const state = reducer.call(this, ...params);\n            if (state instanceof Promise) {\n                state\n                    .then(state => {\n                        this[STATE] = state;\n                        this[NOTIFY](action, ...params);\n                    })\n                    .catch(e => {\n                        if (e) {\n                            console.error(e.stack || e);\n                        }\n                    });\n            } else {\n                this[STATE] = state;\n                this[NOTIFY](action, ...params);\n            }\n        }\n    }\n\n    getState() {\n        return this[STATE];\n    }\n\n    onUpdate(...actions) {\n        const self = this;\n        return (prototype, key) => {\n            if (!Array.isArray(prototype[UPDATER])) {\n                prototype[UPDATER] = [];\n                const componentDidMount = prototype.componentDidMount;\n                const componentWillUnmount = prototype.componentWillUnmount;\n\n                prototype.componentDidMount = function() {\n                    this[DISPOSER] = self.subscribe((state, action) => {\n                        for (const item of this[UPDATER]) {\n                            if (actions.length === 0) {\n                                this[key](state, action);\n                            } else {\n                                if (actions.indexOf(action) !== -1) {\n                                    this[key](state, action);\n                                }\n                            }\n                        }\n                    });\n                    if (componentDidMount) {\n                        componentDidMount.call(this);\n                    }\n                }\n\n                prototype.componentWillUnmount = function() {\n                    this[DISPOSER]();\n                    if (componentWillUnmount) {\n                        componentWillUnmount.call(this);\n                    }\n                }\n            }\n\n            prototype[UPDATER].push({\n                method: key,\n                actions,\n            });\n        }\n    }\n}\n\nfunction Reducer(action) {\n    return (prototype, key) => {\n        prototype[REDUCERS] = prototype[REDUCERS] || {};\n        prototype[REDUCERS][action] = key;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/"],"sourceRoot":""}