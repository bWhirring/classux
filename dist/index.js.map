{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap becd9826b06a6d7baeae","webpack:///./src/index.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;SCtCS,O,GAAA,O;SAAS,M,GAAA,M;;;AAElB,KAAM,UAAU,QAAhB;AACA,KAAM,WAAW,QAAjB;;AAEA,KAAM,QAAQ,QAAd;AACA,KAAM,YAAY,QAAlB;AACA,KAAM,WAAW,QAAjB;AACA,KAAM,gBAAgB,QAAtB;AACA,KAAM,cAAc,QAApB;;AAGA,KAAM,SAAS,QAAf;;KAEqB,K;AACjB,oBAAY,YAAZ,EAA0B;AAAA;;AAAA;;AACtB,cAAK,aAAL,IAAsB,YAAtB;AACA,cAAK,KAAL,IAAc,YAAd;AACA,cAAK,SAAL,IAAkB,EAAlB;AACA,cAAK,WAAL,IAAoB,KAAK,WAAL,KAAqB,EAAzC;AACA,cAAK,QAAL,IAAiB,KAAK,QAAL,KAAkB,EAAnC;AACA,cAAK,MAAL,IAAe,UAAC,MAAD,EAAuB;AAAA,+CAAX,MAAW;AAAX,uBAAW;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAClC,sCAAuB,MAAK,SAAL,CAAvB,8HAAwC;AAAA,yBAA7B,QAA6B;;AACpC,gDAAS,MAAK,KAAL,CAAT,EAAsB,MAAtB,SAAiC,MAAjC;AACH;AAHiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIrC,UAJD;AAKH;;;;mCAES,Q,EAAU;AAAA;;AAChB,iBAAM,QAAQ,KAAK,SAAL,EAAgB,IAAhB,CAAqB,QAArB,IAAiC,CAA/C;AACA,oBAAO,YAAM;AACT,wBAAK,SAAL,EAAgB,MAAhB,CAAuB,KAAvB,EAA8B,CAA9B;AACH,cAFD;AAGH;;;kCAEQ,M,EAAmB;AAAA,gDAAR,MAAQ;AAAR,uBAAQ;AAAA;;AAAA;AAAA,sEAExB,iBAAwB,MAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AACU,4CADV,GACoB,KAAK,KAAK,QAAL,EAAe,MAAf,CAAL,CADpB;;AAAA,0CAEQ,OAFR;AAAA;AAAA;AAAA;;AAGQ,yCAAI,MAAJ,EAAY;AACR,8CAAK,KAAL,IAAc,MAAd;AACH;AACK,0CANd,GAMsB,QAAQ,IAAR,iBAAa,IAAb,SAAsB,MAAtB,EANtB;;AAAA,2CAOY,iBAAiB,OAP7B;AAAA;AAAA;AAAA;;AAAA;AAAA,4CAQyB,KARzB;;AAAA;AAAA;;AAAA;AAAA,sEAUmB,KAVnB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFwB;;AAAA,iCAET,QAFS;AAAA;AAAA;AAAA;;AAAA;AAAA,uEAiBxB,kBAAmB,IAAnB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACQ,sCADR,GACY,YAAY,MADxB;;AAEI,4CAAO,GAAP,EAAY;AACR,gDAAQ,UAAC,UAAD,EAAa,IAAb;AAAA;AAAA,uGAAsB,kBAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAChB,0EADgB,GACR,UAAU,KAAK,QAAL,EADF;AAAA;AAAA,4EAET,6BACT,IADS,EAET,KAFS,EAGT,MAHS,SAIN,MAJM,EAFS;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDAAtB;;AAAA;AAAA;AAAA;AAAA;AAAA,0CAAD,CAQA,YAAY,CAAZ,CARA,EAQgB,IARhB,CAAP;AASH;AAZL;AAAA,4CAaiB,MAbjB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAjBwB;;AAAA,iCAiBT,GAjBS;AAAA;AAAA;AAAA;;AACxB,iBAAM,OAAO,IAAb;AAcC;AACD,iBAAM,cAAc,KAAK,WAAL,CAApB;;AAgBA,iBAAI,QAAJ,EACK,IADL,CACU,iBAAS;AACX,sBAAK,KAAL,IAAc,KAAd;AACA,sBAAK,MAAL,EAAa,MAAb,EAAqB,MAArB;AACH,cAJL,EAKK,KALL,CAKW,aAAK;AACR,yBAAQ,GAAR,CAAY,EAAE,KAAF,IAAW,CAAvB;AACH,cAPL;AAQH;;;oCAEU;AACP,oBAAO,KAAK,KAAL,CAAP;AACH;;;oCAEoB;AAAA,gDAAT,OAAS;AAAT,wBAAS;AAAA;;AACjB,iBAAM,OAAO,IAAb;AACA,oBAAO,UAAC,SAAD,EAAY,GAAZ,EAAoB;AACvB,qBAAI,CAAC,MAAM,OAAN,CAAc,UAAU,OAAV,CAAd,CAAL,EAAwC;AAAA;AACpC,mCAAU,OAAV,IAAqB,EAArB;AACA,6BAAM,oBAAoB,UAAU,iBAApC;AACA,6BAAM,uBAAuB,UAAU,oBAAvC;;AAEA,mCAAU,iBAAV,GAA8B,YAAW;AAAA;;AACrC,kCAAK,QAAL,IAAiB,EAAjB;AADqC;AAAA;AAAA;;AAAA;AAErC,uDAAmB,KAAK,OAAL,CAAnB,mIAAkC;AAAA,yCAAvB,IAAuB;;AAC9B,0CAAK,QAAL,EAAe,IAAf,CAAoB,KAAK,KAAL,CAAW,SAAX,CAAsB,UAAC,MAAD,EAAS,OAAT;AAAA,gDACtC,UAAC,KAAD,EAAQ,MAAR,EAAmB;AACf,iDAAI,QAAQ,MAAR,KAAmB,CAAvB,EAA0B;AACtB,wDAAK,MAAL,EAAa,KAAb,EAAoB,MAApB;AACH,8CAFD,MAEO;AACH,qDAAI,QAAQ,OAAR,CAAgB,MAAhB,MAA4B,CAAC,CAAjC,EAAoC;AAChC,4DAAK,MAAL,EAAa,KAAb,EAAoB,MAApB;AACH;AACJ;AACJ,0CATqC;AAAA,sCAAD,CAUvC,KAAK,MAVkC,EAU1B,KAAK,OAVqB,CAArB,CAApB;AAWH;AAdoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAerC,iCAAI,iBAAJ,EAAuB;AACnB,mDAAkB,IAAlB,CAAuB,IAAvB;AACH;AACJ,0BAlBD;;AAoBA,mCAAU,oBAAV,GAAiC,YAAW;AAAA;AAAA;AAAA;;AAAA;AACxC,uDAAuB,KAAK,QAAL,CAAvB,mIAAuC;AAAA,yCAA5B,QAA4B;;AACnC;AACH;AAHuC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAIxC,iCAAI,oBAAJ,EAA0B;AACtB,sDAAqB,IAArB,CAA0B,IAA1B;AACH;AACJ,0BAPD;AAzBoC;AAiCvC;;AAED,2BAAU,OAAV,EAAmB,IAAnB,CAAwB;AACpB,6BAAQ,GADY;AAEpB,qCAFoB;AAGpB,4BAAO;AAHa,kBAAxB;AAKH,cAzCD;AA0CH;;;iCAEO,M,EAAQ,M,EAAQ;AACpB,iBAAM,OAAO,IAAb;AACA,oBAAO,UAAC,GAAD,EAAU;AACb,qBAAM,SAAS,QAAf;AACA,sBAAK,QAAL,GAAgB,IAAI,SAApB,EAA+B,MAA/B;AACA;AAAA;;AACI,qCAAY,KAAZ,EAAmB;AAAA;;AAAA,gHACT,KADS;;AAEf,gCAAK,KAAL,GAAa,OAAK,KAAL,IAAc,EAA3B;AACA,6BAAI,QAAQ,KAAK,QAAL,EAAZ;AACA,6BAAI,MAAJ,EAAY;AACV,qCAAQ,MAAM,MAAN,CAAR;AACD;AACD,6BAAI,MAAJ,EAAY;AACV,oCAAK,KAAL,CAAW,MAAX,IAAqB,KAArB;AACD,0BAFD,MAEO;AACL,oCAAK,KAAL,GAAa,KAAb;AACD;AAXc;AAYlB;;AAbL;AAAA,8BAcK,MAdL;AAAA,+CAca,KAdb,EAcoB;AACZ,iCAAI,IAAI,EAAR;AACA,iCAAI,OAAO,MAAP,KAAmB,QAAnB,IACM,OAAO,MAAP,KAAmB,QAD7B,EACuC;AACnC,mCAAE,MAAF,IAAY,MAAM,MAAN,CAAZ;AACH,8BAHD,MAGO,IAAI,OAAO,MAAP,KAAmB,QAAvB,EAAiC;AACpC,mCAAE,MAAF,IAAY,KAAZ;AACH,8BAFM,MAEA,IAAI,MAAJ,EAAY;AACf,sCAAK,IAAM,GAAX,IAAkB,MAAlB,EAA0B;AACtB,yCAAM,QAAQ,OAAO,GAAP,CAAd;AACA,yCAAI,OAAO,KAAP,KAAkB,UAAtB,EAAkC;AAC9B,2CAAE,GAAF,IAAS,OAAO,GAAP,EAAY,KAAZ,CAAT;AACH,sCAFD,MAEO;AACH,2CAAE,GAAF,IAAS,MAAM,OAAO,GAAP,CAAN,CAAT;AACH;AACJ;AACJ,8BATM,MASA;AACH,qCAAI,KAAJ;AACH;AACD,kCAAK,QAAL,CAAc,CAAd;AACH;AAlCL;;AAAA;AAAA,mBAAqB,GAArB;AAoCH,cAvCD;AAwCH;;;kCAEqB;AAAA;;AAClB,kCAAK,WAAL,GAAkB,IAAlB;AACH;;;;;;mBA/JgB,K;;;AAkKrB,UAAS,OAAT,CAAiB,MAAjB,EAAyB;AACrB,YAAO,UAAC,SAAD,EAAY,GAAZ,EAAoB;AACvB,mBAAU,QAAV,IAAsB,UAAU,QAAV,KAAuB,EAA7C;AACA,mBAAU,QAAV,EAAoB,MAApB,IAA8B,GAA9B;AACH,MAHD;AAIH;AACD,UAAS,MAAT,GAAgC;AAAA,wCAAb,WAAa;AAAb,oBAAa;AAAA;;AAC5B,YAAO,UAAC,GAAD,EAAS;AAAA;;AACZ,aAAI,SAAJ,CAAc,WAAd,IAA6B,IAAI,SAAJ,CAAc,WAAd,KAA8B,EAA3D;AACA,sCAAI,SAAJ,CAAc,WAAd,GAA2B,IAA3B,8BAAmC,WAAnC;AACH,MAHD;AAIH,E","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Classux\"] = factory();\n\telse\n\t\troot[\"Classux\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap becd9826b06a6d7baeae\n **/","export { Reducer, Inject };\n\nconst UPDATER = Symbol();\nconst DISPOSER = Symbol();\n\nconst STATE = Symbol();\nconst LISTENERS = Symbol();\nconst REDUCERS = Symbol();\nconst DEFAULT_STATE = Symbol();\nconst MIDDLEWARES = Symbol();\n\n\nconst NOTIFY = Symbol();\n\nexport default class Store {\n    constructor(defaultState) {\n        this[DEFAULT_STATE] = defaultState;\n        this[STATE] = defaultState;\n        this[LISTENERS] = [];\n        this[MIDDLEWARES] = this[MIDDLEWARES] || [];\n        this[REDUCERS] = this[REDUCERS] || {};\n        this[NOTIFY] = (action, ...params) => {\n            for (const listener of this[LISTENERS]) {\n                listener(this[STATE], action, ...params);\n            }\n        }\n    }\n\n    subscribe(listener) {\n        const index = this[LISTENERS].push(listener) - 1;\n        return () => {\n            this[LISTENERS].splice(index, 1);\n        };\n    }\n\n    dispatch(action, ...params) {\n        const self = this;\n        async function dispatch(_state) {\n            const reducer = self[self[REDUCERS][action]];\n            if (reducer) {\n                if (_state) {\n                    self[STATE] = _state;\n                }\n                const state = reducer.call(self, ...params);\n                if (state instanceof Promise) {\n                    return await state;\n                } else {\n                    return state;\n                }\n            }\n        };\n        const middlewares = this[MIDDLEWARES];\n        async function run(next) {\n            let i = middlewares.length;\n            while (i--) {\n                next = ((middleware, next) => async (_state) => {\n                        const state = _state || self.getState();\n                        return await middleware(\n                            next,\n                            state,\n                            action,\n                            ...params\n                        );\n                    })(middlewares[i], next);\n            }\n            return await next();\n        }\n        run(dispatch)\n            .then(state => {\n                self[STATE] = state;\n                self[NOTIFY](action, params);\n            })\n            .catch(e => {\n                console.log(e.stack || e);\n            })\n    }\n\n    getState() {\n        return this[STATE];\n    }\n\n    onUpdate(...actions) {\n        const self = this;\n        return (prototype, key) => {\n            if (!Array.isArray(prototype[UPDATER])) {\n                prototype[UPDATER] = [];\n                const componentDidMount = prototype.componentDidMount;\n                const componentWillUnmount = prototype.componentWillUnmount;\n\n                prototype.componentDidMount = function() {\n                    this[DISPOSER] = [];\n                    for (const item of this[UPDATER]) {\n                        this[DISPOSER].push(item.store.subscribe(((method, actions) =>\n                            (state, action) => {\n                                if (actions.length === 0) {\n                                    this[method](state, action);\n                                } else {\n                                    if (actions.indexOf(action) !== -1) {\n                                        this[method](state, action);\n                                    }\n                                }\n                            }\n                        )(item.method, item.actions)));\n                    }\n                    if (componentDidMount) {\n                        componentDidMount.call(this);\n                    }\n                }\n\n                prototype.componentWillUnmount = function() {\n                    for (const disposer of this[DISPOSER]) {\n                        disposer();\n                    }\n                    if (componentWillUnmount) {\n                        componentWillUnmount.call(this);\n                    }\n                }\n            }\n\n            prototype[UPDATER].push({\n                method: key,\n                actions,\n                store: self,\n            });\n        }\n    }\n\n    connect(schema, source) {\n        const self = this;\n        return (obj) =>  {\n            const METHOD = Symbol();\n            self.onUpdate()(obj.prototype, METHOD);\n            return class extends obj {\n                constructor(props) {\n                    super(props);\n                    this.state = this.state || {};\n                    let state = self.getState();\n                    if (source) {\n                      state = state[source];\n                    }\n                    if (schema) {\n                      this.state[schema] = state;\n                    } else {\n                      this.state = state;\n                    }\n                }\n                [METHOD](state) {\n                    let s = {};\n                    if (typeof(schema) === 'string' &&\n                              typeof(source) === 'string') {\n                        s[schema] = state[source];\n                    } else if (typeof(schema) === 'string') {\n                        s[schema] = state;\n                    } else if (schema) {\n                        for (const key in schema) {\n                            const match = schema[key];\n                            if (typeof(match) === 'function') {\n                                s[key] = schema[key](state);\n                            } else {\n                                s[key] = state[schema[key]];\n                            }\n                        }\n                    } else {\n                        s = state;\n                    }\n                    this.setState(s);\n                }\n            }\n        }\n    }\n\n    inject(...middlwares) {\n        this[MIDDLEWARES].push(...middlwares);\n    }\n}\n\nfunction Reducer(action) {\n    return (prototype, key) => {\n        prototype[REDUCERS] = prototype[REDUCERS] || {};\n        prototype[REDUCERS][action] = key;\n    }\n}\nfunction Inject(...middlewares) {\n    return (obj) => {\n        obj.prototype[MIDDLEWARES] = obj.prototype[MIDDLEWARES] || [];\n        obj.prototype[MIDDLEWARES].push(...middlewares);\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/"],"sourceRoot":""}